{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { Picker } from \"@react-native-picker/picker\";\nimport { TextInput, Button } from \"@react-native-material/core\";\nimport { API } from \"../api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ProductByIdScreen() {\n  var _useState = useState('Botella'),\n      _useState2 = _slicedToArray(_useState, 2),\n      pickCategory = _useState2[0],\n      setPickCategory = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      listImage = _useState4[0],\n      setListImage = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nombre = _useState6[0],\n      setNombre = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      precio = _useState8[0],\n      setPrecio = _useState8[1];\n\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      if (Platform.OS !== \"web\") {\n        var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n            status = _yield$ImagePicker$re.status;\n\n        if (status !== \"granted\") {\n          alert(\"Sorry, we need camera roll permissions to make this work!\");\n        }\n      }\n    })();\n  }, []);\n\n  var pickImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1, 1],\n        quality: 1\n      });\n\n      if (!result.cancelled) {\n        setListImage([].concat(_toConsumableArray(listImage), [result.uri]));\n      }\n    });\n\n    return function pickImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var sendImg = function () {\n    var _ref3 = _asyncToGenerator(function* (lista) {\n      if (pickCategory == \"\" || listImage == \"\" || nombre == \"\" || precio == \"\") {\n        Alert.alert('Debes rellenar todos los campos');\n      } else {\n        for (var i = 0; i < lista.length; i++) {\n          console.log(\"agrega imagen al producto\");\n          var filename = lista[i].split(\"/\").pop();\n          var match = /\\.(\\w+)$/.exec(filename);\n          var type = match ? \"image/\" + match[1] : \"image\";\n          var data = new FormData();\n          data.append(\"image\", {\n            uri: lista[i],\n            name: filename,\n            type: type\n          });\n          data.append(\"nombre\", nombre);\n          data.append(\"categoria\", pickCategory);\n          data.append(\"precio\", precio);\n          var query = yield fetch(API + \"/products/add\", {\n            method: \"POST\",\n            body: data,\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          });\n          console.log(yield query.json());\n        }\n\n        setPickCategory('Botella');\n        setNombre();\n        setPrecio();\n        setListImage([]);\n      }\n    });\n\n    return function sendImg(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return _jsx(ScrollView, {\n    style: {\n      backgroundColor: \"black\"\n    },\n    contentContainerStyle: {\n      flexGrow: 1,\n      justifyContent: 'center'\n    },\n    children: _jsxs(View, {\n      style: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100%',\n        width: '100%'\n      },\n      children: [_jsx(TextInput, {\n        variant: \"outlined\",\n        value: nombre,\n        style: {\n          width: \"95%\"\n        },\n        placeholder: \"Nombre Producto\",\n        onChangeText: function onChangeText(text) {\n          return setNombre(text);\n        }\n      }), _jsx(TextInput, {\n        variant: \"outlined\",\n        value: precio,\n        style: {\n          width: \"95%\"\n        },\n        placeholder: \"Precio\",\n        onChangeText: function onChangeText(text) {\n          return setPrecio(text);\n        },\n        keyboardType: \"phone-pad\"\n      }), _jsxs(Picker, {\n        style: {\n          width: \"95%\",\n          backgroundColor: \"#EBEBEB\",\n          marginBottom: 20\n        },\n        selectedValue: pickCategory,\n        onValueChange: function onValueChange(itemValue, itemIndex) {\n          return setPickCategory(itemValue);\n        },\n        children: [_jsx(Picker.Item, {\n          label: \"Botella\",\n          value: \"Botella\"\n        }), _jsx(Picker.Item, {\n          label: \"Refresco\",\n          value: \"Refresco\"\n        }), _jsx(Picker.Item, {\n          label: \"Cerveza\",\n          value: \"Cerveza\"\n        }), _jsx(Picker.Item, {\n          label: \"Chupito\",\n          value: \"Chupito\"\n        }), _jsx(Picker.Item, {\n          label: \"Champagne\",\n          value: \"Champagne\"\n        }), _jsx(Picker.Item, {\n          label: \"Cachimbas\",\n          value: \"Cachimbas\"\n        }), _jsx(Picker.Item, {\n          label: \"Vapers\",\n          value: \"Vapers\"\n        })]\n      }), listImage.length < 1 && _jsx(Button, {\n        title: \"Imagen del producto\",\n        style: {\n          backgroundColor: \"red\",\n          marginBottom: 10\n        },\n        onPress: pickImage\n      }), listImage.map(function (item, index) {\n        return _jsx(View, {\n          style: {\n            width: 150,\n            height: 150,\n            backgroundColor: \"white\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            borderRadius: 25,\n            marginBottom: 30\n          },\n          children: _jsx(Image, {\n            source: {\n              uri: item\n            },\n            style: {\n              width: 120,\n              height: 120\n            }\n          }, index)\n        }, index);\n      }), _jsx(Button, {\n        title: \"Enviar\",\n        style: {\n          backgroundColor: 'orange'\n        },\n        onPress: function onPress() {\n          return sendImg(listImage);\n        }\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","useRef","ImagePicker","Picker","TextInput","Button","API","ProductByIdScreen","pickCategory","setPickCategory","listImage","setListImage","nombre","setNombre","precio","setPrecio","Platform","OS","requestMediaLibraryPermissionsAsync","status","alert","pickImage","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","cancelled","uri","sendImg","lista","Alert","i","length","console","log","filename","split","pop","match","exec","type","data","FormData","append","name","query","fetch","method","body","headers","json","backgroundColor","flexGrow","justifyContent","alignItems","height","width","text","marginBottom","itemValue","itemIndex","map","item","index","borderRadius"],"sources":["C:/Users/xabig/Desktop/ProyectoPiconera2/clientev2/screens/CrearProducto.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Image, View, Platform, Text, ScrollView, Alert } from \"react-native\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport { Picker } from \"@react-native-picker/picker\";\r\nimport { TextInput, Button } from \"@react-native-material/core\";\r\nimport { API } from \"../api\";\r\n\r\nexport default function ProductByIdScreen() {\r\n  const [pickCategory, setPickCategory] = useState('Botella');\r\n  const [listImage, setListImage] = useState([]);\r\n  const [nombre, setNombre] = useState()\r\n  const [precio, setPrecio] = useState()\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (Platform.OS !== \"web\") {\r\n        const { status } =\r\n          await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        if (status !== \"granted\") {\r\n          alert(\"Sorry, we need camera roll permissions to make this work!\");\r\n        }\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const pickImage = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n      allowsEditing: true,\r\n      aspect: [1, 1],\r\n      quality: 1,\r\n    });\r\n\r\n    if (!result.cancelled) {\r\n      setListImage([...listImage, result.uri]);\r\n    }\r\n  };\r\n\r\n  const sendImg = async (lista) => {\r\n    if(pickCategory == \"\" || listImage == \"\" || nombre == \"\" || precio == \"\"){\r\n      Alert.alert('Debes rellenar todos los campos')\r\n    } else {\r\n      for (let i = 0; i < lista.length; i++) {\r\n        console.log(\"agrega imagen al producto\");\r\n        let filename = lista[i].split(\"/\").pop();\r\n        let match = /\\.(\\w+)$/.exec(filename);\r\n        let type = match ? `image/${match[1]}` : \"image\";\r\n        let data = new FormData();\r\n        data.append(\"image\", { uri: lista[i], name: filename, type });\r\n        data.append(\"nombre\", nombre);\r\n        data.append(\"categoria\", pickCategory);\r\n        data.append(\"precio\", precio);\r\n  \r\n        const query = await fetch(`${API}/products/add`, {\r\n          method: \"POST\",\r\n          body: data,\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        });\r\n        console.log(await query.json());\r\n      }\r\n      setPickCategory('Botella')\r\n      setNombre()\r\n      setPrecio()\r\n      setListImage([])\r\n    }\r\n  };\r\n  return (\r\n    <ScrollView\r\n      style={{\r\n        backgroundColor: \"black\",\r\n      }}\r\n      contentContainerStyle={{flexGrow : 1, justifyContent : 'center'}}\r\n    >\r\n      <View style={{justifyContent:'center', alignItems: 'center', height: '100%', width: '100%'}}>\r\n      <TextInput\r\n        variant=\"outlined\"\r\n        value={nombre}\r\n        style={{ width: \"95%\" }}\r\n        placeholder=\"Nombre Producto\"\r\n        onChangeText={(text) => setNombre(text)}\r\n      />\r\n      <TextInput\r\n        variant=\"outlined\"\r\n        value={precio}\r\n        style={{ width: \"95%\" }}\r\n        placeholder=\"Precio\"\r\n        onChangeText={(text) => setPrecio(text)}\r\n        keyboardType=\"phone-pad\"\r\n      />\r\n\r\n      <Picker\r\n        style={{\r\n          width: \"95%\",\r\n          backgroundColor: \"#EBEBEB\",\r\n          marginBottom: 20\r\n        }}\r\n        selectedValue={pickCategory}\r\n        onValueChange={(itemValue, itemIndex) => setPickCategory(itemValue)}\r\n      >\r\n        <Picker.Item label=\"Botella\" value=\"Botella\" />\r\n        <Picker.Item label=\"Refresco\" value=\"Refresco\" />\r\n        <Picker.Item label=\"Cerveza\" value=\"Cerveza\" />\r\n        <Picker.Item label=\"Chupito\" value=\"Chupito\" />\r\n        <Picker.Item label=\"Champagne\" value=\"Champagne\" />\r\n        <Picker.Item label=\"Cachimbas\" value=\"Cachimbas\" />\r\n        <Picker.Item label=\"Vapers\" value=\"Vapers\" />\r\n      </Picker>\r\n      {listImage.length < 1 && (\r\n        <Button\r\n          title=\"Imagen del producto\"\r\n          style={{ backgroundColor: \"red\", marginBottom: 10 }}\r\n          onPress={pickImage}\r\n        />\r\n      )}\r\n      {listImage.map((item, index) => (\r\n        <View\r\n          key={index}\r\n          style={{\r\n            width: 150,\r\n            height: 150,\r\n            backgroundColor: \"white\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            borderRadius: 25,\r\n            marginBottom: 30\r\n          }}\r\n        >\r\n          <Image\r\n            key={index}\r\n            source={{ uri: item }}\r\n            style={{ width: 120, height: 120 }}\r\n          />\r\n        </View>\r\n      ))}\r\n      <Button title=\"Enviar\" style={{backgroundColor: 'orange'}} onPress={() => sendImg(listImage)} />\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}